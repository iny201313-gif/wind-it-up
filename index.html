<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Wind It Up ðŸ’—</title>

<style>
  * { box-sizing: border-box; }

  body {
    margin: 0;
    height: 100vh;
    background: linear-gradient(#ffd1dc, #ff4d6d);
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: Arial, sans-serif;
    overflow: hidden;
  }

  .booth {
    width: 90%;
    max-width: 420px;
    text-align: center;
  }

  h1 { color: #b3003b; }
  p { color: #800026; font-size: 14px; }

  .photo-holder {
    position: relative;
    width: 100%;
    height: 300px;
    background: #fff0f5;
    border: 3px dashed #b3003b;
    border-radius: 20px;
    margin: 20px 0;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .photo {
    position: absolute;
    width: 100%;
    height: 100%;
    display: none;
    align-items: center;
    justify-content: center;
  }

  .photo img {
    max-width: 90%;
    max-height: 90%;
    object-fit: contain;
    border-radius: 15px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
  }

  .wand {
    width: 200px;
    height: 20px;
    background: #b3003b;
    border-radius: 10px;
    margin: 30px auto 0;
    cursor: grab;
    user-select: none;
    transform-origin: center center;
  }
</style>
</head>

<body>

<div class="booth">
  <h1>âœ¨ Wind the Wand âœ¨</h1>
  <p>Rotate continuously to reveal memories</p>

  <div class="photo-holder">
    <div class="photo"><img src="IMG-01.jpg"></div>
    <div class="photo"><img src="IMG-02.jpg"></div>
    <div class="photo"><img src="IMG-03.jpg"></div>
    <div class="photo"><img src="IMG-04.jpg"></div>
    <div class="photo"><img src="IMG-05.jpg"></div>
    <div class="photo"><img src="IMG-06.jpg"></div>
    <div class="photo"><img src="IMG-07.jpg"></div>
    <div class="photo"><img src="IMG-08.jpg"></div>
    <div class="photo"><img src="IMG-09.jpg"></div>
    <div class="photo"><img src="IMG-10.jpg"></div>
  </div>

  <div class="wand" id="wand"></div>
</div>

<audio id="voice" src="voice.mp3" preload="auto"></audio>

<script>
  const wand = document.getElementById("wand");
  const photos = document.querySelectorAll(".photo");
  const audio = document.getElementById("voice");

  let isDragging = false;
  let lastAngle = 0;
  let rotation = 0;
  let lastMoveTime = 0;
  let revealed = 0;

  function angleFromEvent(e) {
    const r = wand.getBoundingClientRect();
    const cx = r.left + r.width / 2;
    const cy = r.top + r.height / 2;
    return Math.atan2(e.clientY - cy, e.clientX - cx) * 180 / Math.PI;
  }

  wand.addEventListener("mousedown", e => {
    isDragging = true;
    lastAngle = angleFromEvent(e);
  });

  document.addEventListener("mousemove", e => {
    if (!isDragging) return;

    const angle = angleFromEvent(e);
    const delta = angle - lastAngle;
    lastAngle = angle;

    if (Math.abs(delta) > 0.3) {
      lastMoveTime = Date.now();
      if (audio.paused) audio.play().catch(() => {});
    }

    rotation += delta;
    wand.style.transform = `rotate(${rotation}deg)`;
  });

  document.addEventListener("mouseup", stopAll);
  document.addEventListener("mouseleave", stopAll);

  function stopAll() {
    isDragging = false;
    audio.pause();
  }

  // ðŸ”¥ IMAGE REVEAL BASED ON AUDIO TIME
  audio.addEventListener("timeupdate", () => {
    if (!audio.duration) return;

    const progress = audio.currentTime / audio.duration;
    const shouldReveal = Math.floor(progress * photos.length);

    for (let i = 0; i <= shouldReveal && i < photos.length; i++) {
      photos[i].style.display = "flex";
    }
  });
</script>

</body>
</html>
